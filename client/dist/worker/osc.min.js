var osc=osc||{};!function(){"use strict";osc.SECS_70YRS=2208988800,osc.TWO_32=4294967296,osc.defaults={metadata:!1,unpackSingleArgs:!0},osc.isCommonJS=!("undefined"==typeof module||!module.exports),osc.isNode=osc.isCommonJS&&"undefined"==typeof window,osc.isElectron=!("undefined"==typeof process||!process.versions||!process.versions.electron),osc.isBufferEnv=osc.isNode||osc.isElectron,osc.isArray=function(e){return e&&"[object Array]"===Object.prototype.toString.call(e)},osc.isTypedArrayView=function(e){return e.buffer&&e.buffer instanceof ArrayBuffer},osc.isBuffer=function(e){return osc.isBufferEnv&&e instanceof Buffer};var e="undefined"!=typeof dcodeIO?dcodeIO.Long:"undefined"!=typeof e?e:osc.isNode?require("long"):void 0;osc.dataView=function(e,t,r){return e.buffer?new DataView(e.buffer,t,r):e instanceof ArrayBuffer?new DataView(e,t,r):new DataView(new Uint8Array(e),t,r)},osc.byteArray=function(e){if(e instanceof Uint8Array)return e;var t=e.buffer?e.buffer:e;if(!(t instanceof ArrayBuffer||"undefined"!=typeof t.length&&"string"!=typeof t))throw new Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(e,null,2));return new Uint8Array(t)},osc.nativeBuffer=function(e){return osc.isBufferEnv?osc.isBuffer(e)?e:new Buffer(e.buffer?e:new Uint8Array(e)):osc.isTypedArrayView(e)?e:new Uint8Array(e)},osc.copyByteArray=function(e,t,r){if(osc.isTypedArrayView(e)&&osc.isTypedArrayView(t))t.set(e,r);else for(var n=void 0===r?0:r,i=Math.min(t.length-r,e.length),s=0,o=n;s<i;s++,o++)t[o]=e[s];return t},osc.readString=function(e,t){for(var r=[],n=t.idx;n<e.byteLength;n++){var i=e.getUint8(n);if(0===i){n++;break}r.push(i)}return n=n+3&-4,t.idx=n,String.fromCharCode.apply(null,r)},osc.writeString=function(e){for(var t=e+"\0",r=t.length,n=r+3&-4,i=new Uint8Array(n),s=0;s<t.length;s++){var o=t.charCodeAt(s);i[s]=o}return i},osc.readPrimitive=function(e,t,r,n){var i=e[t](n.idx,!1);return n.idx+=r,i},osc.writePrimitive=function(e,t,r,n,i){i=void 0===i?0:i;var s;return t?s=new Uint8Array(t.buffer):(s=new Uint8Array(n),t=new DataView(s.buffer)),t[r](i,e,!1),s},osc.readInt32=function(e,t){return osc.readPrimitive(e,"getInt32",4,t)},osc.writeInt32=function(e,t,r){return osc.writePrimitive(e,t,"setInt32",4,r)},osc.readInt64=function(t,r){var n=osc.readPrimitive(t,"getInt32",4,r),i=osc.readPrimitive(t,"getInt32",4,r);return e?new e(i,n):{high:n,low:i,unsigned:!1}},osc.writeInt64=function(e,t,r){var n=new Uint8Array(8);return n.set(osc.writePrimitive(e.high,t,"setInt32",4,r),0),n.set(osc.writePrimitive(e.low,t,"setInt32",4,r+4),4),n},osc.readFloat32=function(e,t){return osc.readPrimitive(e,"getFloat32",4,t)},osc.writeFloat32=function(e,t,r){return osc.writePrimitive(e,t,"setFloat32",4,r)},osc.readFloat64=function(e,t){return osc.readPrimitive(e,"getFloat64",8,t)},osc.writeFloat64=function(e,t,r){return osc.writePrimitive(e,t,"setFloat64",8,r)},osc.readChar32=function(e,t){var r=osc.readPrimitive(e,"getUint32",4,t);return String.fromCharCode(r)},osc.writeChar32=function(e,t,r){var n=e.charCodeAt(0);if(!(void 0===n||n<-1))return osc.writePrimitive(n,t,"setUint32",4,r)},osc.readBlob=function(e,t){var r=osc.readInt32(e,t),n=r+3&-4,i=new Uint8Array(e.buffer,t.idx,r);return t.idx+=n,i},osc.writeBlob=function(e){e=osc.byteArray(e);var t=e.byteLength,r=t+3&-4,n=4,i=r+n,s=new Uint8Array(i),o=new DataView(s.buffer);return osc.writeInt32(t,o),s.set(e,n),s},osc.readMIDIBytes=function(e,t){var r=new Uint8Array(e.buffer,t.idx,4);return t.idx+=4,r},osc.writeMIDIBytes=function(e){e=osc.byteArray(e);var t=new Uint8Array(4);return t.set(e),t},osc.readColor=function(e,t){var r=new Uint8Array(e.buffer,t.idx,4),n=r[3]/255;return t.idx+=4,{r:r[0],g:r[1],b:r[2],a:n}},osc.writeColor=function(e){var t=Math.round(255*e.a),r=new Uint8Array([e.r,e.g,e.b,t]);return r},osc.readTrue=function(){return!0},osc.readFalse=function(){return!1},osc.readNull=function(){return null},osc.readImpulse=function(){return 1},osc.readTimeTag=function(e,t){var r=osc.readPrimitive(e,"getUint32",4,t),n=osc.readPrimitive(e,"getUint32",4,t),i=0===r&&1===n?Date.now():osc.ntpToJSTime(r,n);return{raw:[r,n],native:i}},osc.writeTimeTag=function(e){var t=e.raw?e.raw:osc.jsToNTPTime(e.native),r=new Uint8Array(8),n=new DataView(r.buffer);return osc.writeInt32(t[0],n,0),osc.writeInt32(t[1],n,4),r},osc.timeTag=function(e,t){e=e||0,t=t||Date.now();var r=t/1e3,n=Math.floor(r),i=r-n,s=Math.floor(e),o=e-s,a=i+o;if(a>1){var c=Math.floor(a),u=a-c;s+=c,a=u}var f=n+s+osc.SECS_70YRS,h=Math.round(osc.TWO_32*a);return{raw:[f,h]}},osc.ntpToJSTime=function(e,t){var r=e-osc.SECS_70YRS,n=t/osc.TWO_32,i=1e3*(r+n);return i},osc.jsToNTPTime=function(e){var t=e/1e3,r=Math.floor(t),n=t-r,i=r+osc.SECS_70YRS,s=Math.round(osc.TWO_32*n);return[i,s]},osc.readArguments=function(e,t,r){var n=osc.readString(e,r);if(0!==n.indexOf(","))throw new Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+n," at offset: "+r.idx);var i=n.substring(1).split(""),s=[];return osc.readArgumentsIntoArray(s,i,n,e,t,r),s},osc.readArgument=function(e,t,r,n,i){var s=osc.argumentTypes[e];if(!s)throw new Error("'"+e+"' is not a valid OSC type tag. Type tag string was: "+t);var o=s.reader,a=osc[o](r,i);return n.metadata&&(a={type:e,value:a}),a},osc.readArgumentsIntoArray=function(e,t,r,n,i,s){for(var o=0;o<t.length;){var a,c=t[o];if("["===c){var u=t.slice(o+1),f=u.indexOf("]");if(f<0)throw new Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+r);var h=u.slice(0,f);a=osc.readArgumentsIntoArray([],h,r,n,i,s),o+=f+2}else a=osc.readArgument(c,r,n,i,s),o++;e.push(a)}return e},osc.writeArguments=function(e,t){var r=osc.collectArguments(e,t);return osc.joinParts(r)},osc.joinParts=function(e){for(var t=new Uint8Array(e.byteLength),r=e.parts,n=0,i=0;i<r.length;i++){var s=r[i];osc.copyByteArray(s,t,n),n+=s.length}return t},osc.addDataPart=function(e,t){t.parts.push(e),t.byteLength+=e.length},osc.writeArrayArguments=function(e,t){for(var r="[",n=0;n<e.length;n++){var i=e[n];r+=osc.writeArgument(i,t)}return r+="]"},osc.writeArgument=function(e,t){if(osc.isArray(e))return osc.writeArrayArguments(e,t);var r=e.type,n=osc.argumentTypes[r].writer;if(n){var i=osc[n](e.value);osc.addDataPart(i,t)}return e.type},osc.collectArguments=function(e,t,r){osc.isArray(e)||(e="undefined"==typeof e?[]:[e]),r=r||{byteLength:0,parts:[]},t.metadata||(e=osc.annotateArguments(e));for(var n=",",i=r.parts.length,s=0;s<e.length;s++){var o=e[s];n+=osc.writeArgument(o,r)}var a=osc.writeString(n);return r.byteLength+=a.byteLength,r.parts.splice(i,0,a),r},osc.readMessage=function(e,t,r){t=t||osc.defaults;var n=osc.dataView(e,e.byteOffset,e.byteLength);r=r||{idx:0};var i=osc.readString(n,r);return osc.readMessageContents(i,n,t,r)},osc.readMessageContents=function(e,t,r,n){if(0!==e.indexOf("/"))throw new Error("A malformed OSC address was found while reading an OSC message. String was: "+e);var i=osc.readArguments(t,r,n);return{address:e,args:1===i.length&&r.unpackSingleArgs?i[0]:i}},osc.collectMessageParts=function(e,t,r){return r=r||{byteLength:0,parts:[]},osc.addDataPart(osc.writeString(e.address),r),osc.collectArguments(e.args,t,r)},osc.writeMessage=function(e,t){if(t=t||osc.defaults,!osc.isValidMessage(e))throw new Error("An OSC message must contain a valid address. Message was: "+JSON.stringify(e,null,2));var r=osc.collectMessageParts(e,t);return osc.joinParts(r)},osc.isValidMessage=function(e){return e.address&&0===e.address.indexOf("/")},osc.readBundle=function(e,t,r){return osc.readPacket(e,t,r)},osc.collectBundlePackets=function(e,t,r){r=r||{byteLength:0,parts:[]},osc.addDataPart(osc.writeString("#bundle"),r),osc.addDataPart(osc.writeTimeTag(e.timeTag),r);for(var n=0;n<e.packets.length;n++){var i=e.packets[n],s=i.address?osc.collectMessageParts:osc.collectBundlePackets,o=s(i,t);r.byteLength+=o.byteLength,osc.addDataPart(osc.writeInt32(o.byteLength),r),r.parts=r.parts.concat(o.parts)}return r},osc.writeBundle=function(e,t){if(!osc.isValidBundle(e))throw new Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(e,null,2));t=t||osc.defaults;var r=osc.collectBundlePackets(e,t);return osc.joinParts(r)},osc.isValidBundle=function(e){return void 0!==e.timeTag&&void 0!==e.packets},osc.readBundleContents=function(e,t,r,n){for(var i=osc.readTimeTag(e,r),s=[];r.idx<n;){var o=osc.readInt32(e,r),a=r.idx+o,c=osc.readPacket(e,t,r,a);s.push(c)}return{timeTag:i,packets:s}},osc.readPacket=function(e,t,r,n){var i=osc.dataView(e,e.byteOffset,e.byteLength);n=void 0===n?i.byteLength:n,r=r||{idx:0};var s=osc.readString(i,r),o=s[0];if("#"===o)return osc.readBundleContents(i,t,r,n);if("/"===o)return osc.readMessageContents(s,i,t,r);throw new Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+s)},osc.writePacket=function(e,t){if(osc.isValidMessage(e))return osc.writeMessage(e,t);if(osc.isValidBundle(e))return osc.writeBundle(e,t);throw new Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(e,null,2))},osc.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}},osc.inferTypeForArgument=function(e){var t=typeof e;switch(t){case"boolean":return e?"T":"F";case"string":return"s";case"number":return"f";case"undefined":return"N";case"object":if(null===e)return"N";if(e instanceof Uint8Array||e instanceof ArrayBuffer)return"b";if("number"==typeof e.high&&"number"==typeof e.low)return"h"}throw new Error("Can't infer OSC argument type for value: "+JSON.stringify(e,null,2))},osc.annotateArguments=function(e){for(var t=[],r=0;r<e.length;r++){var n,i=e[r];if("object"==typeof i&&i.type&&void 0!==i.value)n=i;else if(osc.isArray(i))n=osc.annotateArguments(i);else{var s=osc.inferTypeForArgument(i);n={type:s,value:i}}t.push(n)}return t},osc.isCommonJS&&(module.exports=osc)}(),function(e,t){"function"==typeof define&&define.amd?define([],t):"function"==typeof require&&"object"==typeof module&&module&&module.exports?module.exports=t():(e.dcodeIO=e.dcodeIO||{}).Long=t()}(this,function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return(e&&e.__isLong__)===!0}function r(e,t){var r,n,s;return t?(e>>>=0,(s=0<=e&&e<256)&&(n=c[e])?n:(r=i(e,(0|e)<0?-1:0,!0),s&&(c[e]=r),r)):(e|=0,(s=-128<=e&&e<128)&&(n=a[e])?n:(r=i(e,e<0?-1:0,!1),s&&(a[e]=r),r))}function n(e,t){if(isNaN(e)||!isFinite(e))return t?v:p;if(t){if(e<0)return v;if(e>=d)return S}else{if(e<=-l)return E;if(e+1>=l)return b}return e<0?n(-e,t).neg():i(e%h|0,e/h|0,t)}function i(t,r,n){return new e(t,r,n)}function s(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return p;if("number"==typeof t?(r=t,t=!1):t=!!t,r=r||10,r<2||36<r)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return s(e.substring(1),t,r).neg();for(var o=n(u(r,8)),a=p,c=0;c<e.length;c+=8){var f=Math.min(8,e.length-c),h=parseInt(e.substring(c,c+f),r);if(f<8){var d=n(u(r,f));a=a.mul(d).add(n(h))}else a=a.mul(o),a=a.add(n(h))}return a.unsigned=t,a}function o(t){return t instanceof e?t:"number"==typeof t?n(t):"string"==typeof t?s(t):i(t.low,t.high,t.unsigned)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var a={},c={};e.fromInt=r,e.fromNumber=n,e.fromBits=i;var u=Math.pow;e.fromString=s,e.fromValue=o;var f=1<<24,h=4294967296,d=0x10000000000000000,l=d/2,g=r(f),p=r(0);e.ZERO=p;var v=r(0,!0);e.UZERO=v;var y=r(1);e.ONE=y;var m=r(1,!0);e.UONE=m;var w=r(-1);e.NEG_ONE=w;var b=i(-1,2147483647,!1);e.MAX_VALUE=b;var S=i(-1,-1,!0);e.MAX_UNSIGNED_VALUE=S;var E=i(0,-2147483648,!1);e.MIN_VALUE=E;var _=e.prototype;return _.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},_.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=n(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=n(u(e,6),this.unsigned),o=this,a="";;){var c=o.div(s),f=o.sub(c.mul(s)).toInt()>>>0,h=f.toString(e);if(o=c,o.isZero())return h+a;for(;h.length<6;)h="0"+h;a=""+h+a}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1===(1&this.low)},_.isEven=function(){return 0===(1&this.low)},_.equals=function(e){return t(e)||(e=o(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(y)},_.neg=_.negate,_.add=function(e){t(e)||(e=o(e));var r=this.high>>>16,n=65535&this.high,s=this.low>>>16,a=65535&this.low,c=e.high>>>16,u=65535&e.high,f=e.low>>>16,h=65535&e.low,d=0,l=0,g=0,p=0;return p+=a+h,g+=p>>>16,p&=65535,g+=s+f,l+=g>>>16,g&=65535,l+=n+u,d+=l>>>16,l&=65535,d+=r+c,d&=65535,i(g<<16|p,d<<16|l,this.unsigned)},_.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return p;if(t(e)||(e=o(e)),e.isZero())return p;if(this.eq(E))return e.isOdd()?E:p;if(e.eq(E))return this.isOdd()?E:p;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return n(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=65535&this.high,a=this.low>>>16,c=65535&this.low,u=e.high>>>16,f=65535&e.high,h=e.low>>>16,d=65535&e.low,l=0,v=0,y=0,m=0;return m+=c*d,y+=m>>>16,m&=65535,y+=a*d,v+=y>>>16,y&=65535,y+=c*h,v+=y>>>16,y&=65535,v+=s*d,l+=v>>>16,v&=65535,v+=a*h,l+=v>>>16,v&=65535,v+=c*f,l+=v>>>16,v&=65535,l+=r*d+s*h+a*f+c*u,l&=65535,i(y<<16|m,l<<16|v,this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(t(e)||(e=o(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?v:p;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return m;s=v}else{if(this.eq(E)){if(e.eq(y)||e.eq(w))return E;if(e.eq(E))return y;var a=this.shr(1);return r=a.div(e).shl(1),r.eq(p)?e.isNegative()?y:w:(i=this.sub(e.mul(r)),s=r.add(i.div(e)))}if(e.eq(E))return this.unsigned?v:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=p}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var c=Math.ceil(Math.log(r)/Math.LN2),f=c<=48?1:u(2,c-48),h=n(r),d=h.mul(e);d.isNegative()||d.gt(i);)r-=f,h=n(r,this.unsigned),d=h.mul(e);h.isZero()&&(h=y),s=s.add(h),i=i.sub(d)}return s},_.div=_.divide,_.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.not=function(){return i(~this.low,~this.high,this.unsigned)},_.and=function(e){return t(e)||(e=o(e)),i(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return t(e)||(e=o(e)),i(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return t(e)||(e=o(e)),i(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?i(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):i(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?i(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):i(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),e&=63,0===e)return this;var r=this.high;if(e<32){var n=this.low;return i(n>>>e|r<<32-e,r>>>e,this.unsigned)}return 32===e?i(r,0,this.unsigned):i(r>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?i(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:i(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e}),function(e,t){"use strict";"object"==typeof exports?(e.slip=exports,t(exports)):"function"==typeof define&&define.amd?define(["exports"],function(r){return e.slip=r,e.slip,t(r)}):(e.slip={},t(e.slip))}(this,function(e){"use strict";var t=e;t.END=192,t.ESC=219,t.ESC_END=220,t.ESC_ESC=221,t.byteArray=function(e,t,r){return e instanceof ArrayBuffer?new Uint8Array(e,t,r):e},t.expandByteArray=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},t.sliceByteArray=function(e,t,r){var n=e.buffer.slice?e.buffer.slice(t,r):e.subarray(t,r);return new Uint8Array(n)},t.encode=function(e,r){r=r||{},r.bufferPadding=r.bufferPadding||4,e=t.byteArray(e,r.offset,r.byteLength);var n=e.length+r.bufferPadding+3&-4,i=new Uint8Array(n),s=1;i[0]=t.END;for(var o=0;o<e.length;o++){s>i.length-3&&(i=t.expandByteArray(i));var a=e[o];a===t.END?(i[s++]=t.ESC,a=t.ESC_END):a===t.ESC&&(i[s++]=t.ESC,a=t.ESC_ESC),i[s++]=a}return i[s]=t.END,t.sliceByteArray(i,0,s+1)},t.Decoder=function(e){e="function"!=typeof e?e||{}:{onMessage:e},this.maxMessageSize=e.maxMessageSize||10485760,this.bufferSize=e.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=e.onMessage,this.onError=e.onError,this.escape=!1};var r=t.Decoder.prototype;return r.decode=function(e){e=t.byteArray(e);for(var r,n=0;n<e.length;n++){var i=e[n];if(this.escape)i===t.ESC_ESC?i=t.ESC:i===t.ESC_END&&(i=t.END);else{if(i===t.ESC){this.escape=!0;continue}if(i===t.END){r=this.handleEnd();continue}}var s=this.addByte(i);s||this.handleMessageMaxError()}return r},r.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},r.addByte=function(e){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=t.expandByteArray(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=e,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},r.handleEnd=function(){if(0!==this.msgBufferIdx){var e=t.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx);return this.onMessage&&this.onMessage(e),this.msgBufferIdx=0,e}},t}),function(){"use strict";function e(){}function t(e,t){for(var r=e.length;r--;)if(e[r].listener===t)return r;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}var n=e.prototype,i=this,s=i.EventEmitter;n.getListeners=function(e){var t,r,n=this._getEvents();if(e instanceof RegExp){t={};for(r in n)n.hasOwnProperty(r)&&e.test(r)&&(t[r]=n[r])}else t=n[e]||(n[e]=[]);return t},n.flattenListeners=function(e){var t,r=[];for(t=0;t<e.length;t+=1)r.push(e[t].listener);return r},n.getListenersAsObject=function(e){var t,r=this.getListeners(e);return r instanceof Array&&(t={},t[e]=r),t||r},n.addListener=function(e,r){var n,i=this.getListenersAsObject(e),s="object"==typeof r;for(n in i)i.hasOwnProperty(n)&&t(i[n],r)===-1&&i[n].push(s?r:{listener:r,once:!1});return this},n.on=r("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=r("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,r){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(n=t(s[i],r),n!==-1&&s[i].splice(n,1));return this},n.off=r("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,r){var n,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=r.length;n--;)s.call(this,t,r[n]);else for(n in t)t.hasOwnProperty(n)&&(i=t[n])&&("function"==typeof i?s.call(this,n,i):o.call(this,n,i));return this},n.removeEvent=function(e){var t,r=typeof e,n=this._getEvents();if("string"===r)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},n.removeAllListeners=r("removeEvent"),n.emitEvent=function(e,t){var r,n,i,s,o,a=this.getListenersAsObject(e);for(s in a)if(a.hasOwnProperty(s))for(r=a[s].slice(0),i=0;i<r.length;i++)n=r[i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},n.trigger=r("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}.call(this);var osc=osc||require("./osc.js"),slip=slip||require("slip"),EventEmitter=EventEmitter||require("events").EventEmitter;!function(){"use strict";osc.firePacketEvents=function(e,t,r,n){t.address?e.emit("message",t,r,n):osc.fireBundleEvents(e,t,r,n)},osc.fireBundleEvents=function(e,t,r,n){e.emit("bundle",t,r,n);for(var i=0;i<t.packets.length;i++){var s=t.packets[i];osc.firePacketEvents(e,s,t.timeTag,n)}},osc.fireClosedPortSendError=function(e,t){t=t||"Can't send packets on a closed osc.Port object. Please open (or reopen) this Port by calling open().",e.emit("error",t)},osc.Port=function(e){this.options=e||{},this.on("data",this.decodeOSC.bind(this))};var e=osc.Port.prototype=Object.create(EventEmitter.prototype);e.constructor=osc.Port,e.send=function(e){var t=Array.prototype.slice.call(arguments),r=this.encodeOSC(e),n=osc.nativeBuffer(r);t[0]=n,this.sendRaw.apply(this,t)},e.encodeOSC=function(e){e=e.buffer?e.buffer:e;var t;try{t=osc.writePacket(e,this.options)}catch(e){this.emit("error",e)}return t},e.decodeOSC=function(e,t){e=osc.byteArray(e),this.emit("raw",e,t);try{var r=osc.readPacket(e,this.options);this.emit("osc",r,t),osc.firePacketEvents(this,r,void 0,t)}catch(e){this.emit("error",e)}},osc.SLIPPort=function(e){var t=this,r=this.options=e||{};r.useSLIP=void 0===r.useSLIP||r.useSLIP,this.decoder=new slip.Decoder({onMessage:this.decodeOSC.bind(this),onError:function(e){t.emit("error",e)}});var n=r.useSLIP?this.decodeSLIPData:this.decodeOSC;this.on("data",n.bind(this))},e=osc.SLIPPort.prototype=Object.create(osc.Port.prototype),e.constructor=osc.SLIPPort,e.encodeOSC=function(e){e=e.buffer?e.buffer:e;var t;try{var r=osc.writePacket(e,this.options);t=slip.encode(r)}catch(e){this.emit("error",e)}return t},e.decodeSLIPData=function(e,t){this.decoder.decode(e,t)},osc.relay=function(e,t,r,n,i,s){r=r||"message",n=n||"send",i=i||function(){},s=s?[null].concat(s):[];var o=function(e){s[0]=e,e=i(e),t[n].apply(t,s)};return e.on(r,o),{eventName:r,listener:o}},osc.relayPorts=function(e,t,r){var n=r.raw?"raw":"osc",i=r.raw?"sendRaw":"send";return osc.relay(e,t,n,i,r.transform)},osc.stopRelaying=function(e,t){e.removeListener(t.eventName,t.listener)},osc.Relay=function(e,t,r){var n=this.options=r||{};n.raw=!1,this.port1=e,this.port2=t,this.listen()},e=osc.Relay.prototype=Object.create(EventEmitter.prototype),e.constructor=osc.Relay,e.open=function(){this.port1.open(),this.port2.open()},e.listen=function(){this.port1Spec&&this.port2Spec&&this.close(),this.port1Spec=osc.relayPorts(this.port1,this.port2,this.options),this.port2Spec=osc.relayPorts(this.port2,this.port1,this.options);var e=this.close.bind(this);this.port1.on("close",e),this.port2.on("close",e)},e.close=function(){osc.stopRelaying(this.port1,this.port1Spec),osc.stopRelaying(this.port2,this.port2Spec),this.emit("close",this.port1,this.port2)},"undefined"!=typeof module&&module.exports&&(module.exports=osc)}();var osc=osc||require("../osc.js");!function(){"use strict";osc.WebSocket="undefined"!=typeof WebSocket?WebSocket:require("ws"),osc.WebSocketPort=function(e){osc.Port.call(this,e),this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&(1===this.socket.readyState?(osc.WebSocketPort.setupSocketForBinary(this.socket),this.emit("open",this.socket)):this.open())};var e=osc.WebSocketPort.prototype=Object.create(osc.Port.prototype);e.constructor=osc.WebSocketPort,e.open=function(){(!this.socket||this.socket.readyState>1)&&(this.socket=new osc.WebSocket(this.options.url)),osc.WebSocketPort.setupSocketForBinary(this.socket);var e=this;this.socket.onopen=function(){e.emit("open",e.socket)}},e.listen=function(){var e=this;this.socket.onmessage=function(t){e.emit("data",t.data,t)},this.socket.onerror=function(t){e.emit("error",t)},this.socket.onclose=function(t){e.emit("close",t)},e.emit("ready")},e.sendRaw=function(e){return this.socket&&1===this.socket.readyState?void this.socket.send(e):void osc.fireClosedPortSendError(this)},e.close=function(e,t){this.socket.close(e,t)},osc.WebSocketPort.setupSocketForBinary=function(e){e.binaryType=osc.isNode?"nodebuffer":"arraybuffer"}}();var _osc=!1,_osc_timeout=null,_osc_port,_osc_ready=!1,_OSC_ENABLE=0,_OSC_DISABLE=1,_OSC_FRAME_DATA=2,_disconnect=function(){_osc_port&&_osc_port.close(),clearTimeout(_osc_timeout)},_connect=function(e){_osc_port=new osc.WebSocketPort({url:"ws://127.0.0.1:8081",metadata:!0}),_osc_port.on("ready",function(){postMessage({status:"ready"}),_osc_ready=!0}),_osc_port.on("bundle",function(e){var t,r,n=e.packets,i=0;for(i=0;i<n.length;i+=1)t=n[i].address,r=n[i].args}),_osc_port.on("message",function(e){var t,r=e.address,n=e.args,i=[],s=r.slice(0,2);if("/clear"===r)postMessage({status:"clear"});else if("/i"===s)postMessage({status:"data",osc_input:{name:r.slice(1,r.length),i:n[0].value,v:n[1].value}});else if("/a"===s){for(t=0;t<n.length;t+=1)i.push(n[t].value);postMessage({status:"data",osc_input:{name:r.slice(1,r.length),v:i}})}}),_osc_port.on("close",function(){_osc&&(postMessage({status:"close"}),clearTimeout(_osc_timeout),_osc_timeout=setTimeout(_connect,5e3,e)),_osc_ready=!1}),_osc_port.on("error",function(t){postMessage({status:"error"}),_osc&&(clearTimeout(_osc_timeout),_osc_timeout=setTimeout(_connect,5e3,e)),_osc_ready=!1}),_osc_port.open()},_getNoteBundle=function(e,t,r,n,i,s,o,a,c){return{address:"/fragment",args:[{type:"i",value:e},{type:"d",value:a*Math.pow(2,t/c)},{type:"f",value:n},{type:"f",value:i},{type:"f",value:s},{type:"f",value:o},{type:"i",value:r}]}},_sendFrameBundle=function(e){if(_osc_ready){var t,r=0,n=0,i=0,s=1,o=e.arg,a={timeTag:osc.timeTag(0),packets:[]};if(_osc){if(e.float)for(r=0;r<2*e.channels;r+=1)o[r]=new Float32Array(o[r]);else{for(r=0;r<2*e.channels;r+=1)o[r]=new Uint8Array(o[r]);s=1/255}for(t=o[0].length/4,i=0;i<e.channels;i+=1)for(n=o[i].length/4-1,r=0;r<o[i].length;r+=4){var c=o[i][r],u=o[i][r+1],f=o[i][r+2],h=o[i][r+3];if(c>0||u>0)c*=s,u*=s,f*=s,h*=s,a.packets.push(_getNoteBundle(n,t-n-1,i,c,u,f,h,e.base_frequency,e.octave_length));else{var d=o[i+e.channels][r],l=o[i+e.channels][r+1];(d>0||l>0)&&(c*=s,u*=s,f*=s,h*=s,a.packets.push(_getNoteBundle(n,t-n-1,i,c,u,f,h,e.base_frequency,e.octave_length)))}n-=1}_osc_port.send(a)}}};self.onmessage=function(e){"use strict";var t=e.data,r=t.cmd,n=t.arg;r===_OSC_ENABLE?(_osc=!0,_connect(n)):r===_OSC_DISABLE?(_osc=!1,_disconnect()):r===_OSC_FRAME_DATA&&_sendFrameBundle(t)};