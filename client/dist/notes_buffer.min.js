self.onmessage=function(a){"use strict";var e,t,r,n,s,d,f,o=a.data.score_height,i=new Float32Array(5*o),l=new Uint8ClampedArray(a.data.prev_data),u=new Uint8ClampedArray(a.data.data),c=0,g=0,m=1/255,p=u.length,h=o-1,w=0,y=0,A=1;for(a.data.mono&&(y=3,A=3),s=0;s<p;s+=4){if(e=l[s+y],t=l[s+A],r=u[s+y],n=u[s+A],r>0||n>0)d=r*m,f=n*m,c=e*m,g=t*m,i[w]=h,i[w+1]=c,i[w+2]=g,i[w+3]=d-c,i[w+4]=f-g;else{if(!(e>0||t>0)){h-=1;continue}c=e*m,g=t*m,i[w]=h,i[w+1]=c,i[w+2]=g,i[w+3]=-c,i[w+4]=-g}h-=1,w+=5}postMessage({d:i.buffer},[i.buffer])};