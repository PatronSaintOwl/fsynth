var WUI_CircularMenu=new function(){"use strict";var e=[],t=0,n={item:"wui-circularmenu-item",show:"wui-circularmenu-show"},o={x:null,y:null,rx:64,ry:48,angle:0,item_width:32,item_height:32,window:null,element:null},i=function(t){var n,o;for(o=0;e.length>o;o+=1)n=e[o],t.body.removeChild(n);e=[]},l=function(e,t,n){var o=function(e){e.preventDefault(),n(),i(t)};return o},a=function(e,o){var l=function(a){a.preventDefault();var r=(new Date).getTime();500>=r-t||a.target.classList.contains(n.item)||(i(o),e.removeEventListener("click",l),e.removeEventListener("mousedown",l))};return l},r=function(e){var t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,a=o.clientTop||n.clientTop||0,r=o.clientLeft||n.clientLeft||0,c=t.top+i-a,d=t.left+l-r;return{top:Math.round(c),left:Math.round(d),width:t.width,height:t.height}},c=function(e){return e*(Math.PI/180)},d=function(o,r,d,s,u,m){i(s);var h,f,p,g,v=-(Math.PI/2)+c(o.angle),w=r.length,E=2*Math.PI/w;for(p=0;w>p;p+=1)f=r[p],h=document.createElement("div"),h.classList.add(n.item),h.style.width=o.item_width+"px",h.style.height=o.item_height+"px",h.style.backgroundSize=o.item_width-4+"px "+(o.item_height-4)+"px",h.style.left=u+o.rx*Math.cos(v)+"px",h.style.top=m+o.ry*Math.sin(v)+"px",h.classList.add(f.icon),f.tooltip&&(h.title=f.tooltip),s.body.appendChild(h),d.getComputedStyle(h).width,e.push(h),f.on_click&&h.addEventListener("click",l(d,s,f.on_click)),h.classList.add(n.show),v+=E;g=a(d,s),d.addEventListener("click",g),t=(new Date).getTime(),d.addEventListener("mousedown",g)};this.create=function(e,t){var n,i,l,a,c,s={},u=document,m=window;for(n in o)o.hasOwnProperty(n)&&(s[n]=o[n]);if(void 0!==e)for(n in e)e.hasOwnProperty(n)&&void 0!==o[n]&&(s[n]=e[n]);a=s.element,null!==a?(c=r(a),u=a.ownerDocument,m=u.defaultView||u.parentWindow,i=c.left+(c.width-s.item_width)/2,l=c.top+(c.height-s.item_height)/2,d(s,t,m,u,i,l)):null!==i&&null!==l&&(null!==s.window&&(m=s.window,u=m.document),i=s.x-s.item_width/2,l=s.y-s.item_height/2,d(s,t,m,u,i,l))}};!function(e,t){"use strict";function n(){if(!l){l=!0;for(var e=0;e<i.length;e++)i[e].fn.call(window,i[e].ctx);i=[]}}function o(){"complete"===document.readyState&&n()}e=e||"docReady",t=t||window;var i=[],l=!1,a=!1;t[e]=function(e,t){return l?void setTimeout(function(){e(t)},1):(i.push({fn:e,ctx:t}),void("complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(n,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",n)),a=!0)))}}("docReady",window);var _fp_main=function(e){var t="Welcome back ",n="fs-user-name",o="fs-session-list",i=document.getElementById("userName"),l=document.getElementById("sessionName"),a=document.getElementById("sessionBtn"),r=document.getElementById("sessionList"),c=document.getElementById("userIntro"),d=document.getElementById("clearSessionsBtn"),s=(document.getElementById("browserCompatibility"),document.getElementById("sessions")),u=localStorage.getItem(o),m=localStorage.getItem(n),h=function(e){e.innerHTML="",localStorage.removeItem(o)},f=function(){return""===l.value?l.placeholder:l.value},p=function(){return""===i.value?i.placeholder:i.value},g=function(t){e||t.length>128||(a.href="app/"+t)},v=function(t){return function(){e?e(t):(g(t),location.href="app/"+t)}},w=function(e,t){return function(){var n=localStorage.getItem(o),i=[],l=0,a=e.parentElement;for(a.parentElement.removeChild(a),n&&(i=JSON.parse(n)),l=0;l<i.length;l+=1)if(i[l]===t){i.splice(l,1);break}i.length>0?localStorage.setItem(o,JSON.stringify(i)):(d.parentElement.removeChild(d),localStorage.removeItem(o)),null!==localStorage.getItem(t)&&localStorage.removeItem(t)}},E=function(){var e=this,t=e.textContent;WUI_CircularMenu.create({element:e,angle:90},[{icon:"fp-join-icon",tooltip:"Join session",on_click:v(t)},{icon:"fp-trash-icon",tooltip:"Delete session",on_click:w(e,t)}])};if(l.placeholder=Math.random().toString(36).substr(2,12),g(l.placeholder),m?(e||(c.innerHTML=t+'<span class="fp-user-name">'+m+"</span>"),i.value=m):s.parentElement.removeChild(s),i.addEventListener("change",function(){localStorage.setItem(n,p())}),l.addEventListener("change",function(){g(l.value)}),d.addEventListener("click",function(){h(r),d.parentElement.removeChild(d)}),a.addEventListener("click",function(t){var i=localStorage.getItem(o),l=[],a=f(),r=0;for(i&&(l=JSON.parse(i)),r=0;r<l.length;r+=1)if(l[r]===a){l.splice(r,1);break}l.push(a),localStorage.setItem(o,JSON.stringify(l)),localStorage.setItem(n,p()),e&&e(name)}),u){var y,I,L=JSON.parse(u),S=0;for(S=0;S<L.length;S+=1)y=document.createElement("tr"),I=document.createElement("td"),r.insertBefore(y,r.firstChild),I.innerHTML=L[S],I.addEventListener("click",E),y.appendChild(I)}else d.parentElement.removeChild(d)};docReady(_fp_main);