var WUI_CircularMenu=new function(){"use strict";var e=[],t=0,n={item:"wui-circularmenu-item",show:"wui-circularmenu-show"},o={x:null,y:null,rx:64,ry:48,angle:0,item_width:32,item_height:32,window:null,element:null},i=function(t){var n,o;for(o=0;e.length>o;o+=1)n=e[o],t.body.removeChild(n);e=[]},l=function(e,t,n){var o=function(e){e.preventDefault(),n(),i(t)};return o},r=function(e,o){var l=function(r){r.preventDefault();var a=(new Date).getTime();500>=a-t||r.target.classList.contains(n.item)||(i(o),e.removeEventListener("click",l),e.removeEventListener("mousedown",l))};return l},a=function(e){var t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,r=o.clientTop||n.clientTop||0,a=o.clientLeft||n.clientLeft||0,c=t.top+i-r,d=t.left+l-a;return{top:Math.round(c),left:Math.round(d),width:t.width,height:t.height}},c=function(e){return e*(Math.PI/180)},d=function(o,a,d,s,u,m){i(s);var h,f,g,p,v=-(Math.PI/2)+c(o.angle),w=a.length,E=2*Math.PI/w;for(g=0;w>g;g+=1)f=a[g],h=document.createElement("div"),h.classList.add(n.item),h.style.width=o.item_width+"px",h.style.height=o.item_height+"px",h.style.backgroundSize=o.item_width-4+"px "+(o.item_height-4)+"px",h.style.left=u+o.rx*Math.cos(v)+"px",h.style.top=m+o.ry*Math.sin(v)+"px",h.classList.add(f.icon),f.tooltip&&(h.title=f.tooltip),s.body.appendChild(h),d.getComputedStyle(h).width,e.push(h),f.on_click&&h.addEventListener("click",l(d,s,f.on_click)),h.classList.add(n.show),v+=E;p=r(d,s),d.addEventListener("click",p),t=(new Date).getTime(),d.addEventListener("mousedown",p)};this.create=function(e,t){var n,i,l,r,c,s={},u=document,m=window;for(n in o)o.hasOwnProperty(n)&&(s[n]=o[n]);if(void 0!==e)for(n in e)e.hasOwnProperty(n)&&void 0!==o[n]&&(s[n]=e[n]);r=s.element,null!==r?(c=a(r),u=r.ownerDocument,m=u.defaultView||u.parentWindow,i=c.left+(c.width-s.item_width)/2,l=c.top+(c.height-s.item_height)/2,d(s,t,m,u,i,l)):null!==i&&null!==l&&(null!==s.window&&(m=s.window,u=m.document),i=s.x-s.item_width/2,l=s.y-s.item_height/2,d(s,t,m,u,i,l))}};!function(e,t){"use strict";function n(){if(!l){l=!0;for(var e=0;e<i.length;e++)i[e].fn.call(window,i[e].ctx);i=[]}}function o(){"complete"===document.readyState&&n()}e=e||"docReady",t=t||window;var i=[],l=!1,r=!1;t[e]=function(e,t){return l?void setTimeout(function(){e(t)},1):(i.push({fn:e,ctx:t}),void("complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(n,1):r||(document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",n)),r=!0)))}}("docReady",window),docReady(function(){var e="Welcome back ",t="fs-user-name",n="fs-session-list",o=document.getElementById("userName"),i=document.getElementById("sessionName"),l=document.getElementById("sessionBtn"),r=document.getElementById("sessionList"),a=document.getElementById("userIntro"),c=document.getElementById("clearSessionsBtn"),d=(document.getElementById("browserCompatibility"),document.getElementById("sessions")),s=localStorage.getItem(n),u=localStorage.getItem(t),m=function(e){e.innerHTML="",localStorage.removeItem(n)},h=function(){return""===i.value?i.placeholder:i.value},f=function(){return""===o.value?o.placeholder:o.value},g=function(e){e.length>128||(l.href="app/"+e)},p=function(e){return function(){g(e),location.href="app/"+e}},v=function(e,t){return function(){var o=localStorage.getItem(n),i=[],l=0,r=e.parentElement;for(r.parentElement.removeChild(r),o&&(i=JSON.parse(o)),l=0;l<i.length;l+=1)if(i[l]===t){i.splice(l,1);break}i.length>0?localStorage.setItem(n,JSON.stringify(i)):(c.parentElement.removeChild(c),localStorage.removeItem(n)),null!==localStorage.getItem(t)&&localStorage.removeItem(t)}},w=function(){var e=this,t=e.textContent;WUI_CircularMenu.create({element:e,angle:90},[{icon:"fp-join-icon",tooltip:"Join session",on_click:p(t)},{icon:"fp-trash-icon",tooltip:"Delete session",on_click:v(e,t)}])};if(i.placeholder=Math.random().toString(36).substr(2,12),g(i.placeholder),u?(a.innerHTML=e+'<span class="fp-user-name">'+u+"</span>",o.value=u):d.parentElement.removeChild(d),o.addEventListener("change",function(){localStorage.setItem(t,f())}),i.addEventListener("change",function(){g(i.value)}),c.addEventListener("click",function(){m(r),c.parentElement.removeChild(c)}),l.addEventListener("click",function(e){var o=localStorage.getItem(n),i=[],l=h(),r=0;for(o&&(i=JSON.parse(o)),r=0;r<i.length;r+=1)if(i[r]===l){i.splice(r,1);break}i.push(l),localStorage.setItem(n,JSON.stringify(i)),localStorage.setItem(t,f())}),s){var E,y,I=JSON.parse(s),L=0;for(L=0;L<I.length;L+=1)E=document.createElement("tr"),y=document.createElement("td"),r.insertBefore(E,r.firstChild),y.innerHTML=I[L],y.addEventListener("click",w),E.appendChild(y)}else c.parentElement.removeChild(c)});