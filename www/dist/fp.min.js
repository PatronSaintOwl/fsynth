var WUI_CircularMenu=new function(){"use strict";var e=[],t=0,n={item:"wui-circularmenu-item",show:"wui-circularmenu-show"},o={x:null,y:null,rx:64,ry:48,angle:0,item_width:32,item_height:32,window:null,element:null},i=function(t){var n,o;for(o=0;e.length>o;o+=1)n=e[o],t.body.removeChild(n);e=[]},l=function(e,t,n){var o=function(e){e.preventDefault(),n(),i(t)};return o},a=function(e,o){var l=function(a){a.preventDefault();var r=(new Date).getTime();500>=r-t||a.target.classList.contains(n.item)||(i(o),e.removeEventListener("click",l),e.removeEventListener("mousedown",l))};return l},r=function(e){var t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,a=o.clientTop||n.clientTop||0,r=o.clientLeft||n.clientLeft||0,c=t.top+i-a,d=t.left+l-r;return{top:Math.round(c),left:Math.round(d),width:t.width,height:t.height}},c=function(e){return e*(Math.PI/180)},d=function(o,r,d,s,u,m){i(s);var f,h,p,v,g=-(Math.PI/2)+c(o.angle),w=r.length,y=2*Math.PI/w;for(p=0;w>p;p+=1)h=r[p],f=document.createElement("div"),f.classList.add(n.item),f.style.width=o.item_width+"px",f.style.height=o.item_height+"px",f.style.backgroundSize=o.item_width-4+"px "+(o.item_height-4)+"px",f.style.left=u+o.rx*Math.cos(g)+"px",f.style.top=m+o.ry*Math.sin(g)+"px",f.classList.add(h.icon),h.tooltip&&(f.title=h.tooltip),s.body.appendChild(f),d.getComputedStyle(f).width,e.push(f),h.on_click&&f.addEventListener("click",l(d,s,h.on_click)),f.classList.add(n.show),g+=y;v=a(d,s),d.addEventListener("click",v),t=(new Date).getTime(),d.addEventListener("mousedown",v)};this.create=function(e,t){var n,i,l,a,c,s={},u=document,m=window;for(n in o)o.hasOwnProperty(n)&&(s[n]=o[n]);if(void 0!==e)for(n in e)e.hasOwnProperty(n)&&void 0!==o[n]&&(s[n]=e[n]);a=s.element,null!==a?(c=r(a),u=a.ownerDocument,m=u.defaultView||u.parentWindow,i=c.left+(c.width-s.item_width)/2,l=c.top+(c.height-s.item_height)/2,d(s,t,m,u,i,l)):null!==i&&null!==l&&(null!==s.window&&(m=s.window,u=m.document),i=s.x-s.item_width/2,l=s.y-s.item_height/2,d(s,t,m,u,i,l))}};!function(e,t){"use strict";function n(){if(!l){l=!0;for(var e=0;e<i.length;e++)i[e].fn.call(window,i[e].ctx);i=[]}}function o(){"complete"===document.readyState&&n()}e=e||"docReady",t=t||window;var i=[],l=!1,a=!1;t[e]=function(e,t){return l?void setTimeout(function(){e(t)},1):(i.push({fn:e,ctx:t}),void("complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(n,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",n)),a=!0)))}}("docReady",window);var _fp_main=function(e){var t="Welcome back ",n="fs-user-name",o="fs-session-list",i=document.getElementById("userName"),l=document.getElementById("sessionName"),a=document.getElementById("sessionBtn"),r=document.getElementById("sessionList"),c=document.getElementById("userIntro"),d=document.getElementById("clearSessionsBtn"),s=(document.getElementById("browserCompatibility"),document.getElementById("sessions")),u=localStorage.getItem(o),m=localStorage.getItem(n),f=function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.getElementById("back_to_top"),n=500;t&&(e<n&&"none"!==t.style.display?t.style.display="none":e>=n&&"none"===t.style.display&&(t.style.display="block"))},h=function(e){e.innerHTML="",localStorage.removeItem(o)},p=function(e){var t=document.getElementById("fp_session_form_validation");t.style.display="",t.innerHTML=e},v=function(){var e=document.getElementById("fp_session_form_validation");e.style.display="none"},g=function(){return""===l.value?l.placeholder:l.value},w=function(){return""===i.value?i.placeholder:i.value},y=function(t){return!e&&(t.length>100?(p("Session name is above the maximum limit of 100 characters."),a.href="#",!1):(0===t.length&&(t=l.placeholder),a.href="app/"+t,v(),!0))},E=function(t){return function(){if(e)e(t);else{if(!y(t))return;location.href="app/"+t}}},I=function(e,t){return function(){var n=localStorage.getItem(o),i=[],l=0,a=e.parentElement;for(a.parentElement.removeChild(a),n&&(i=JSON.parse(n)),l=0;l<i.length;l+=1)if(i[l]===t){i.splice(l,1);break}i.length>0?localStorage.setItem(o,JSON.stringify(i)):(d.parentElement.removeChild(d),localStorage.removeItem(o)),null!==localStorage.getItem(t)&&localStorage.removeItem(t)}},L=function(){var e=this,t=e.textContent;WUI_CircularMenu.create({element:e,angle:90},[{icon:"fp-join-icon",tooltip:"Join session",on_click:E(t)},{icon:"fp-trash-icon",tooltip:"Delete session",on_click:I(e,t)}])};if(l.placeholder=Math.random().toString(36).substr(2,12),y(l.placeholder),m?(e||(c.innerHTML=t+'<span class="fp-user-name">'+m+"</span>"),i.value=m):s.parentElement.removeChild(s),i.addEventListener("change",function(){localStorage.setItem(n,w())}),l.addEventListener("change",function(){y(l.value)}),d.addEventListener("click",function(){h(r),d.parentElement.removeChild(d)}),a.addEventListener("click",function(t){var i=localStorage.getItem(o),l=[],a=g(),r=0;for(i&&(l=JSON.parse(i)),r=0;r<l.length;r+=1)if(l[r]===a){l.splice(r,1);break}l.push(a),localStorage.setItem(o,JSON.stringify(l)),localStorage.setItem(n,w()),e&&e(name)}),u){var _,S,k=JSON.parse(u),C=0;for(C=0;C<k.length;C+=1)_=document.createElement("tr"),S=document.createElement("td"),r.insertBefore(_,r.firstChild),S.innerHTML=k[C],S.addEventListener("click",L),_.appendChild(S)}else d.parentElement.removeChild(d);window.addEventListener("scroll",f),f()};docReady(_fp_main);